{"ast":null,"code":"import _regeneratorRuntime from\"/Users/wanghongguang/Desktop/homework/reactUpload/reactupload/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/wanghongguang/Desktop/homework/reactUpload/reactupload/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/wanghongguang/Desktop/homework/reactUpload/reactupload/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Layout,Card,Form,Input,Button,message,Spin}from'antd';import{login}from'../../axios/api';var Header=Layout.Header,Footer=Layout.Footer,Content=Layout.Content;var Login=function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),errInfo=_useState2[0],setErrInfo=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var layout={labelCol:{span:6},wrapperCol:{span:16}};var tailLayout={wrapperCol:{offset:8,span:16}};//表单验证成功\nvar onFinish=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(value){var _yield$login,status,msg,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return login(value);case 4:_yield$login=_context.sent;status=_yield$login.status;msg=_yield$login.msg;token=_yield$login.token;if(status==='201'){setLoading(false);setErrInfo(msg);}else{setErrInfo('');setLoading(false);window.localStorage.setItem('token',token);props.history.push('/upload');}_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function onFinish(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Layout,{style:{height:'100%'}},/*#__PURE__*/React.createElement(Header,{style:{textAlign:'center',color:'white',fontSize:'20px'}},\"\\u4F5C\\u4E1A\\u4E0A\\u4EA4\\u7CFB\\u7EDF\"),/*#__PURE__*/React.createElement(Content,{style:{margin:'auto',marginTop:'100px'}},/*#__PURE__*/React.createElement(Spin,{tip:\"\\u8BF7\\u6C42\\u4E2D\",spinning:loading},/*#__PURE__*/React.createElement(Card,{title:\"\\u767B\\u9646\",style:{width:500}},/*#__PURE__*/React.createElement(Form,Object.assign({},layout,{name:\"basic\",onFinish:onFinish}),/*#__PURE__*/React.createElement(Form.Item,{label:\"\\u5B66\\u53F7\",name:\"sid\",rules:[{required:true,message:'请输入你的学号！'}]},/*#__PURE__*/React.createElement(Input,null)),/*#__PURE__*/React.createElement(Form.Item,{label:\"\\u5BC6\\u7801\",name:\"password\",rules:[{required:true,message:'请输入你的密码！'}]},/*#__PURE__*/React.createElement(Input.Password,null)),errInfo?/*#__PURE__*/React.createElement(\"div\",{style:{color:'red',textAlign:'center',marginBottom:'10px'}},errInfo):'',/*#__PURE__*/React.createElement(Form.Item,tailLayout,/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\"},\"\\u767B\\u9646\")))))),/*#__PURE__*/React.createElement(Footer,{style:{background:'#041527',color:'white',textAlign:'center'}},\"@\\u7F51\\u7EDC\\u5DE5\\u7A0B171\")));};export default Login;","map":{"version":3,"sources":["/Users/wanghongguang/Desktop/homework/reactUpload/reactupload/src/page/login/index.jsx"],"names":["React","useState","Layout","Card","Form","Input","Button","message","Spin","login","Header","Footer","Content","Login","props","errInfo","setErrInfo","loading","setLoading","layout","labelCol","span","wrapperCol","tailLayout","offset","onFinish","value","status","msg","token","window","localStorage","setItem","history","push","console","log","height","textAlign","color","fontSize","margin","marginTop","width","required","marginBottom","background"],"mappings":"6aAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,IAAvB,CAA6BC,KAA7B,CAAoCC,MAApC,CAA4CC,OAA5C,CAAqDC,IAArD,KAAiE,MAAjE,CACA,OAASC,KAAT,KAAsB,iBAAtB,C,GACQC,CAAAA,M,CAA4BR,M,CAA5BQ,M,CAAQC,M,CAAoBT,M,CAApBS,M,CAAQC,O,CAAYV,M,CAAZU,O,CAExB,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,eACSb,QAAQ,CAAC,EAAD,CADjB,wCACdc,OADc,eACLC,UADK,8BAESf,QAAQ,CAAC,KAAD,CAFjB,yCAEdgB,OAFc,eAELC,UAFK,eAGrB,GAAMC,CAAAA,MAAM,CAAG,CACXC,QAAQ,CAAE,CACNC,IAAI,CAAE,CADA,CADC,CAIXC,UAAU,CAAE,CACRD,IAAI,CAAE,EADE,CAJD,CAAf,CAQA,GAAME,CAAAA,UAAU,CAAG,CACfD,UAAU,CAAE,CACRE,MAAM,CAAE,CADA,CAERH,IAAI,CAAE,EAFE,CADG,CAAnB,CAMA;AACA,GAAMI,CAAAA,QAAQ,0FAAG,iBAAOC,KAAP,oKAETR,UAAU,CAAC,IAAD,CAAV,CAFS,sBAG4BT,CAAAA,KAAK,CAACiB,KAAD,CAHjC,mCAGDC,MAHC,cAGDA,MAHC,CAGOC,GAHP,cAGOA,GAHP,CAGYC,KAHZ,cAGYA,KAHZ,CAIT,GAAIF,MAAM,GAAK,KAAf,CAAsB,CAClBT,UAAU,CAAC,KAAD,CAAV,CACAF,UAAU,CAACY,GAAD,CAAV,CACH,CAHD,IAGO,CACHZ,UAAU,CAAC,EAAD,CAAV,CACAE,UAAU,CAAC,KAAD,CAAV,CACAY,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAqCH,KAArC,EACAf,KAAK,CAACmB,OAAN,CAAcC,IAAd,CAAmB,SAAnB,EACH,CAZQ,iFAcTC,OAAO,CAACC,GAAR,cAdS,qEAAH,kBAARX,CAAAA,QAAQ,4CAAd,CAiBA,mBACI,oBAAC,KAAD,CAAO,QAAP,mBACI,oBAAC,MAAD,EAAQ,KAAK,CAAE,CAAEY,MAAM,CAAE,MAAV,CAAf,eACI,oBAAC,MAAD,EAAQ,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAb,CAAuBC,KAAK,CAAE,OAA9B,CAAuCC,QAAQ,CAAE,MAAjD,CAAf,yCADJ,cAKI,oBAAC,OAAD,EAAS,KAAK,CAAE,CAAEC,MAAM,CAAE,MAAV,CAAkBC,SAAS,CAAE,OAA7B,CAAhB,eACI,oBAAC,IAAD,EAAM,GAAG,CAAC,oBAAV,CAAgB,QAAQ,CAAEzB,OAA1B,eACI,oBAAC,IAAD,EAAM,KAAK,CAAC,cAAZ,CAAiB,KAAK,CAAE,CAAE0B,KAAK,CAAE,GAAT,CAAxB,eACI,oBAAC,IAAD,kBACQxB,MADR,EAEI,IAAI,CAAC,OAFT,CAGI,QAAQ,CAAEM,QAHd,gBAKI,oBAAC,IAAD,CAAM,IAAN,EACI,KAAK,CAAC,cADV,CAEI,IAAI,CAAC,KAFT,CAGI,KAAK,CAAE,CACH,CACImB,QAAQ,CAAE,IADd,CAEIrC,OAAO,CAAE,UAFb,CADG,CAHX,eAUI,oBAAC,KAAD,MAVJ,CALJ,cAkBI,oBAAC,IAAD,CAAM,IAAN,EACI,KAAK,CAAC,cADV,CAEI,IAAI,CAAC,UAFT,CAGI,KAAK,CAAE,CACH,CACIqC,QAAQ,CAAE,IADd,CAEIrC,OAAO,CAAE,UAFb,CADG,CAHX,eAUI,oBAAC,KAAD,CAAO,QAAP,MAVJ,CAlBJ,CA8BKQ,OAAO,cAAG,2BAAK,KAAK,CAAE,CAAEwB,KAAK,CAAE,KAAT,CAAgBD,SAAS,CAAE,QAA3B,CAAqCO,YAAY,CAAE,MAAnD,CAAZ,EAA0E9B,OAA1E,CAAH,CAA8F,EA9B1G,cA+BI,oBAAC,IAAD,CAAM,IAAN,CAAeQ,UAAf,cACI,oBAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,QAAQ,CAAC,QAAhC,iBADJ,CA/BJ,CADJ,CADJ,CADJ,CALJ,cAgDI,oBAAC,MAAD,EAAQ,KAAK,CAAE,CAAEuB,UAAU,CAAE,SAAd,CAAyBP,KAAK,CAAE,OAAhC,CAAyCD,SAAS,CAAE,QAApD,CAAf,iCAhDJ,CADJ,CADJ,CAwDH,CA3FD,CA6FA,cAAezB,CAAAA,KAAf","sourcesContent":["import React, { useState } from 'react'\nimport { Layout, Card, Form, Input, Button, message, Spin } from 'antd';\nimport { login } from '../../axios/api'\nconst { Header, Footer, Content } = Layout;\n\nconst Login = (props) => {\n    const [errInfo, setErrInfo] = useState('')\n    const [loading, setLoading] = useState(false)\n    const layout = {\n        labelCol: {\n            span: 6,\n        },\n        wrapperCol: {\n            span: 16,\n        },\n    }\n    const tailLayout = {\n        wrapperCol: {\n            offset: 8,\n            span: 16,\n        },\n    }\n    //表单验证成功\n    const onFinish = async (value) => {\n        try {\n            setLoading(true)\n            const { status, msg, token } = await login(value)\n            if (status === '201') {\n                setLoading(false)\n                setErrInfo(msg)\n            } else {\n                setErrInfo('')\n                setLoading(false)\n                window.localStorage.setItem('token', token)\n                props.history.push('/upload')\n            }\n        } catch (e) {\n            console.log(e)\n        }\n    }\n    return (\n        <React.Fragment>\n            <Layout style={{ height: '100%' }}>\n                <Header style={{ textAlign: 'center', color: 'white', fontSize: '20px' }}>\n                    作业上交系统\n                </Header>\n\n                <Content style={{ margin: 'auto', marginTop: '100px' }}>\n                    <Spin tip='请求中' spinning={loading}>\n                        <Card title=\"登陆\" style={{ width: 500 }}>\n                            <Form\n                                {...layout}\n                                name=\"basic\"\n                                onFinish={onFinish}\n                            >\n                                <Form.Item\n                                    label=\"学号\"\n                                    name=\"sid\"\n                                    rules={[\n                                        {\n                                            required: true,\n                                            message: '请输入你的学号！',\n                                        },\n                                    ]}\n                                >\n                                    <Input />\n                                </Form.Item>\n\n                                <Form.Item\n                                    label=\"密码\"\n                                    name=\"password\"\n                                    rules={[\n                                        {\n                                            required: true,\n                                            message: '请输入你的密码！',\n                                        },\n                                    ]}\n                                >\n                                    <Input.Password />\n                                </Form.Item>\n                                {errInfo ? <div style={{ color: 'red', textAlign: 'center', marginBottom: '10px' }}>{errInfo}</div> : ''}\n                                <Form.Item {...tailLayout}>\n                                    <Button type=\"primary\" htmlType=\"submit\">\n                                        登陆\n                                </Button>\n                                </Form.Item>\n                            </Form>\n                        </Card>\n                    </Spin>\n                </Content>\n                <Footer style={{ background: '#041527', color: 'white', textAlign: 'center' }}>\n                    @网络工程171\n                </Footer>\n            </Layout>\n        </React.Fragment>\n    )\n}\n\nexport default Login"]},"metadata":{},"sourceType":"module"}