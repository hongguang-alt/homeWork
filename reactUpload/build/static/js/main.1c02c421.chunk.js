(this.webpackJsonpreactupload=this.webpackJsonpreactupload||[]).push([[0],{347:function(e,t,a){e.exports=a(667)},502:function(e,t){},504:function(e,t){},516:function(e,t){},518:function(e,t){},546:function(e,t){},548:function(e,t){},549:function(e,t){},555:function(e,t){},557:function(e,t){},575:function(e,t){},578:function(e,t){},594:function(e,t){},597:function(e,t){},667:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),l=a.n(c),o=a(11),s=a.n(o),u=a(25),i=a(18),m=a(668),p=a(310),f=a(672),d=a(671),E=a(676),v=a(30),g=a(172),h=a(129),b=a.n(h);b.a.defaults.baseURL="http://122.152.193.177:3001",b.a.interceptors.request.use((function(e){var t=window.localStorage.getItem("token");return t&&(e.headers.authorization="Bearer "+t),e}),(function(e){return Promise.reject(e)})),b.a.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var y=b.a,w=function(e){return y.post("/file/uploadfile",e)},x=function(e){return y.post("/user/changeFile",Object(g.a)({},e))},k=function(e){var t=e.name;return y.get("/file/delete/"+t)},j=m.a.Header,O=m.a.Footer,I=m.a.Content,S=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),h=Object(i.a)(o,2),b=h[0],w=h[1],x={wrapperCol:{offset:8,span:16}},k=function(){var t=Object(u.a)(s.a.mark((function t(a){var n,r,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,w(!0),t.next=4,s=a,y.post("/user/login",Object(g.a)({},s));case 4:n=t.sent,r=n.status,c=n.msg,o=n.token,"201"===r?(w(!1),l(c)):(l(""),w(!1),window.localStorage.setItem("token",o),e.history.push("/upload")),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}var s}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{style:{height:"100%"}},r.a.createElement(j,{style:{textAlign:"center",color:"white",fontSize:"20px"}},"\u4f5c\u4e1a\u4e0a\u4ea4\u7cfb\u7edf"),r.a.createElement(I,{style:{margin:"auto",marginTop:"100px"}},r.a.createElement(p.a,{tip:"\u8bf7\u6c42\u4e2d",spinning:b},r.a.createElement(f.a,{title:"\u767b\u9646",style:{width:500}},r.a.createElement(d.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:16}},{name:"basic",onFinish:k}),r.a.createElement(d.a.Item,{label:"\u5b66\u53f7",name:"sid",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u5b66\u53f7\uff01"}]},r.a.createElement(E.a,null)),r.a.createElement(d.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u5bc6\u7801\uff01"}]},r.a.createElement(E.a.Password,null)),c?r.a.createElement("div",{style:{color:"red",textAlign:"center",marginBottom:"10px"}},c):"",r.a.createElement(d.a.Item,x,r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"\u767b\u9646")))))),r.a.createElement(O,{style:{background:"#041527",color:"white",textAlign:"center"}},"@\u7f51\u7edc\u5de5\u7a0b171")))},C=a(679),F=a(680),P=a(681),T=a(82),N=a(673),z=function(){var e=d.a.useForm(),t=Object(i.a)(e,1)[0],a={wrapperCol:{offset:10,span:14}},n=function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(a),e.prev=1,e.next=4,t.resetFields();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c=t,y.post("/user/password",Object(g.a)({},c));case 3:a=e.sent,n=a.status,r=a.msg,"200"==n?N.a.success("\u4fee\u6539\u6210\u529f"):N.a.error(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),N.a.error("\u4fee\u6539\u5bc6\u7801\u63a5\u53e3\u8bf7\u6c42\u5931\u8d25");case 12:case"end":return e.stop()}var c}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"\u4fee\u6539\u5bc6\u7801"),r.a.createElement(f.a,{style:{width:"100%"}},r.a.createElement("div",{style:{width:"300px",margin:"auto"}},r.a.createElement(d.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{name:"basic",initialValues:{remember:!0},onFinish:n,form:t}),r.a.createElement(d.a.Item,{label:"\u65e7\u5bc6\u7801",name:"oldPassword",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65e7\u5bc6\u7801!"}]},r.a.createElement(E.a.Password,null)),r.a.createElement(d.a.Item,{label:"\u65b0\u5bc6\u7801",name:"newPassword",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("oldPassword")===a?Promise.reject("\u65b0\u5bc6\u7801\u4e0d\u80fd\u548c\u65e7\u5bc6\u7801\u76f8\u540c!"):Promise.resolve()}}}]},r.a.createElement(E.a.Password,null)),r.a.createElement(d.a.Item,a,r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"))))))},q=a(674),A=a(677),B=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),o=Object(i.a)(l,2),m=o[0],p=o[1],d=Object(n.useState)({}),E=Object(i.a)(d,2),g=E[0],h=E[1];Object(n.useEffect)((function(){b()}),[]);var b=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get("/user/fileName");case 3:t=e.sent,a=t.status,n=t.data,r=t.msg,"200"==a?h(n):N.a.error(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),N.a.error("\u8bf7\u6c42\u6587\u4ef6\u540d\u79f0\u63a5\u53e3\u5931\u8d25");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(t);case 3:a=e.sent,n=a.status,r=a.msg,"200"===n?(c([]),p(!1),N.a.success("\u4e0a\u4f20\u6210\u529f")):(N.a.error(r),p(!1)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),N.a.error("\u8bf7\u6c42\u4e0a\u4f20\u63a5\u53e3\u5931\u8d25"),p(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),k={onRemove:function(e){var t=a.indexOf(e),n=a.slice();n.splice(t,1),c(n)},beforeUpload:function(e){return c([e]),!1},fileList:a};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"\u4e0a\u4f20\u4f5c\u4e1a"),r.a.createElement(f.a,{title:"\u4e0a\u4f20\u8981\u6c42",style:{width:"100%",marginBottom:"50px"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:"14px",fontWeight:"bold"}},"\u672c\u6b21\u4e0a\u4f20\u7684\u4f5c\u4e1a\uff1a"),r.a.createElement("span",{style:{color:"red"}},g.content)),r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:"14px",fontWeight:"bold"}},"\u547d\u540d\u65b9\u5f0f\uff1a"),r.a.createElement("span",{style:{color:"red"}},g.format)))),r.a.createElement(f.a,{title:"\u4e0a\u4f20\u5185\u5bb9"},r.a.createElement(q.a,k,r.a.createElement(v.a,null,r.a.createElement(A.a,null),"  \u4e0a\u4f20")),r.a.createElement(v.a,{type:"primary",onClick:function(){p(!0);var e=new FormData;a.forEach((function(t){e.append("file",t)})),x(e)},disabled:0===a.length,loading:m,style:{marginTop:16}},m?"\u4e0a\u4f20\u4e2d":"\u5f00\u59cb\u4e0a\u4f20")))},D=a(171),H=a(678),Y=a(17),L=a(160),R=a.n(L),W=Object(Y.f)((function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){var e=R.a.verify(window.localStorage.getItem("token"),"yinxiu").name;l(e)}));var o=r.a.createElement(T.a,{onClick:function(t){"out"===t.key&&(window.localStorage.removeItem("token"),e.history.push("/"))}},r.a.createElement(T.a.Item,{key:"out"},"\u9000\u51fa"));return r.a.createElement(D.a,{overlay:o},r.a.createElement("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},"\u6b22\u8fce\u4f60\uff0c",c," ",r.a.createElement(H.a,null)))})),J=a(322),M=a.n(J),U=a(675),V=a(669),K=a(670),G=U.a.confirm,Q=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(i.a)(l,2),m=o[0],p=o[1],g=d.a.useForm(),h=Object(i.a)(g,1)[0];Object(n.useEffect)((function(){O(),I()}),[]);var b=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.localStorage.getItem("token"),window.location.assign("http://localhost:3001/file/downloadall/"+t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=window.localStorage.getItem("token"),window.location.assign("http://localhost:3001/file/download/"+t+"/"+a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x(t);case 3:a=e.sent,n=a.msg,"200"==a.status?N.a.success("\u4fee\u6539\u6210\u529f"):N.a.error(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),N.a.error("\u8bbf\u95ee\u4fee\u6539\u63a5\u53e3\u5931\u8d25");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get("/user/noFileName");case 3:t=e.sent,a=t.data,n=t.status,r=t.msg,"200"==n?(N.a.success("\u83b7\u53d6\u672a\u5b8c\u6210\u4f5c\u4e1a\u5217\u8868\u6210\u529f"),c(a.data)):N.a.error(r),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),N.a.error("\u83b7\u53d6\u672a\u5b8c\u6210\u4f5c\u4e1a\u63a5\u53e3\u5931\u8d25");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get("/user/detail");case 3:t=e.sent,a=t.data,n=t.status,r=t.msg,"200"==n?(N.a.success("\u83b7\u53d6\u5217\u8868\u6210\u529f"),p(a.data)):N.a.error(r),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),S=[{title:"\u59d3\u540d",dataIndex:"name",key:"name"},{title:"\u5b66\u53f7",dataIndex:"sid",key:"sid",sorter:function(e,t){return Number(e.sid)-Number(t.sid)}},{title:"\u6587\u4ef6\u540d\u79f0",dataIndex:"fileName",key:"fileName"},{title:"\u63d0\u4ea4\u65f6\u95f4",dataIndex:"ctime",key:"ctime",sorter:function(e,t){return new Date(e.ctime).getTime()-new Date(t.ctime).getTime()},render:function(e){return M()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",render:function(e,t){return r.a.createElement(V.a,{size:"middle"},r.a.createElement("a",{onClick:function(){return F(t)}},"\u5220\u9664"),r.a.createElement("a",{onClick:function(){w(t.fileName)}},"\u5bfc\u51fa"))}}],C={wrapperCol:{offset:10,span:14}},F=function(e){G({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u6761\u6570\u636e?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var t=Object(u.a)(s.a.mark((function t(){var a,n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k({name:e.fileName});case 3:a=t.sent,n=a.status,r=a.msg,"200"==n?(N.a.success("\u5220\u9664\u6587\u6863\u6210\u529f"),I(),O()):N.a.error(r),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),N.a.error("\u5220\u9664\u5355\u4e2a\u63a5\u53e3\u5931\u8d25");case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),onCancel:function(){console.log("Cancel")}})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"\u7ba1\u7406\u4f5c\u4e1a"),r.a.createElement(f.a,{title:"\u4f5c\u4e1a\u672a\u4e0a\u4ea4\u540d\u5355",style:{marginBottom:"50px"}},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},Array.isArray(a)?a.map((function(e,t){return r.a.createElement("div",{key:t,style:{width:"50px",textAlign:"center",color:"red"}},e)})):null)),r.a.createElement(f.a,{title:"\u4f5c\u4e1a\u5185\u5bb9",style:{marginBottom:"50px"}},r.a.createElement("div",{style:{width:"600px",margin:"auto"}},r.a.createElement(d.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:16}},{name:"basic",onFinish:function(e){j(e),h.resetFields()},form:h}),r.a.createElement(d.a.Item,{label:"\u4e0a\u4f20\u4f5c\u4e1a\u5185\u5bb9",name:"content",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f5c\u4e1a\u5185\u5bb9"}]},r.a.createElement(E.a,null)),r.a.createElement(d.a.Item,{label:"\u547d\u540d\u683c\u5f0f",name:"format",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u547d\u540d\u683c\u5f0f"}]},r.a.createElement(E.a,null)),r.a.createElement(d.a.Item,C,r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"\u63d0\u4ea4"))))),r.a.createElement(f.a,{title:"\u4f5c\u4e1a\u5217\u8868",extra:r.a.createElement("div",null,r.a.createElement(v.a,{type:"primary",style:{fontSize:"14px"},onClick:b},"\u5168\u90e8\u5bfc\u51fa"),r.a.createElement(v.a,{type:"primary",style:{fontSize:"14px",marginLeft:"10px"},onClick:function(){G({title:"\u786e\u5b9a\u6e05\u7a7a\u6570\u636e?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get("/file/deleteall");case 3:t=e.sent,a=t.status,n=t.msg,"200"==a?(N.a.success("\u5220\u9664\u5168\u90e8\u6587\u6863\u6210\u529f"),I(),O()):N.a.error(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),N.a.error("\u5220\u9664\u5168\u90e8\u63a5\u53e3\u5931\u8d25");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),onCancel:function(){console.log("Cancel")}})}},"\u6e05\u7a7a\u6570\u636e"))},r.a.createElement(K.a,{dataSource:m,columns:S})))},X=m.a.Header,Z=m.a.Content,$=m.a.Sider,_=function(){var e=Object(n.useState)("uploadwork"),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("student"),o=Object(i.a)(l,2),s=o[0],u=o[1];Object(n.useEffect)((function(){var e=R.a.verify(window.localStorage.getItem("token"),"yinxiu").role;u(e)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{style:{height:"100%"}},r.a.createElement(X,{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("h1",{style:{color:"#fff"}},"\u4f5c\u4e1a\u4e0a\u4f20"),r.a.createElement(W,null)),r.a.createElement(m.a,null,r.a.createElement($,{style:{overflow:"hidden",background:"white"}},r.a.createElement(T.a,{style:{borderRight:0,fontSize:"14px"},defaultSelectedKeys:["uploadwork"],onClick:function(e){e.item;var t=e.key;e.keyPath,e.domEvent;c(t)}},r.a.createElement(T.a.Item,{key:"uploadwork",icon:r.a.createElement(C.a,null)},"\u4e0a\u4f20\u4f5c\u4e1a\u6587\u4ef6"),r.a.createElement(T.a.Item,{key:"changep",icon:r.a.createElement(F.a,null)},"\u4fee\u6539\u5bc6\u7801"),"admin"===s?r.a.createElement(T.a.Item,{key:"manager",icon:r.a.createElement(P.a,null)},"\u7ba1\u7406\u4f5c\u4e1a"):null)),r.a.createElement(Z,null,r.a.createElement("div",{style:{padding:30}},"changep"===a?r.a.createElement(z,null):"uploadwork"===a?r.a.createElement(B,null):"manager"===a?r.a.createElement(Q,null):void 0)))))},ee=a(338);a(666);var te=function(){return r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(ee.a,null,r.a.createElement(Y.c,null,r.a.createElement(Y.a,{path:"/",exact:!0,component:S}),r.a.createElement(Y.a,{path:"/login",exact:!0,component:S}),r.a.createElement(Y.a,{path:"/upload",exact:!0,component:_}))))};l.a.render(r.a.createElement(te,null),document.getElementById("root"))}},[[347,1,2]]]);
//# sourceMappingURL=main.1c02c421.chunk.js.map